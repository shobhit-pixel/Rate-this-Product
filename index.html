<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Average Rating</title>
<link rel="stylesheet" href="app.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="container">
    <h2>Rate this Product</h2>
    <div class="stars">
        <span class="star" data-value="1">&#9733;</span>
        <span class="star" data-value="2">&#9733;</span>
        <span class="star" data-value="3">&#9733;</span>
        <span class="star" data-value="4">&#9733;</span>
        <span class="star" data-value="5">&#9733;</span>
    </div>
    <input type="hidden" id="ratingValue" value="0">
    <p>Your rating: <span id="displayRating">0</span> <span id="ratingMsg"></span></p>
    <p>Average rating: <span id="averageRating">0</span></p>
</div>
<script>
$(document).ready(function(){
    const messages=["Poor ðŸ˜ž","Fair ðŸ˜","Good ðŸ™‚","Very Good ðŸ˜ƒ","Excellent ðŸ˜"];
    let allRatings = [3,4,5,2];
    function updateAverage(newRating){
        allRatings.push(newRating);
        const sum=allRatings.reduce((a,b)=>a+b,0);
        const avg=(sum/allRatings.length).toFixed(1);
        $("#averageRating").text(avg);
    }
    $(".star").hover(
        function(){ $(this).prevAll().addBack().addClass("hover"); },
        function(){ $(this).prevAll().addBack().removeClass("hover"); }
    );
    $(".star").click(function(){
        const rating=$(this).data("value");
        $("#ratingValue").val(rating);
        $("#displayRating").text(rating);
        $("#ratingMsg").text(messages[rating-1]);
        $(".star").removeClass("selected");
        $(this).prevAll().addBack().addClass("selected");
        updateAverage(rating);
    });
    const sum=allRatings.reduce((a,b)=>a+b,0);
    $("#averageRating").text((sum/allRatings.length).toFixed(1));
});
</script>
</body>

</html>
